<!doctype html>
<html lang="fr-fr">
  <head>
    <title>ActiveMQ // Tech blog</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.66.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="http://example.org/css/main.min.d59a293bff4cb6f7fcce92a5c9833de7107393f80e4efe3110eea46955464842.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ActiveMQ"/>
<meta name="twitter:description" content="Pendant une petite semaine j’ai regardé de plus près le serveur de JMS ActiveMQ. Je vais vous faire partager mes premières remarques.
Le coeur
ActiveMQ est un broker de message à utiliser pour le développement d’une architecture MOM (Middleware Oriente Messages). Je l’ai choisi aussi pour sa bonne intégration avec Spring et sa bonne tenue en charge.
Son architecture est simple : (source : http://activemq.apache.org/code-overview.html)
"/>

    <meta property="og:title" content="ActiveMQ" />
<meta property="og:description" content="Pendant une petite semaine j’ai regardé de plus près le serveur de JMS ActiveMQ. Je vais vous faire partager mes premières remarques.
Le coeur
ActiveMQ est un broker de message à utiliser pour le développement d’une architecture MOM (Middleware Oriente Messages). Je l’ai choisi aussi pour sa bonne intégration avec Spring et sa bonne tenue en charge.
Son architecture est simple : (source : http://activemq.apache.org/code-overview.html)
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2009/04/21/activemq/" />
<meta property="article:published_time" content="2009-04-21T07:42:59+00:00" />
<meta property="article:modified_time" content="2009-04-21T07:42:59+00:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="http://example.org/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <h1>Tech blog</h1>
      <p>Vieux blog technique</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/sliard" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">ActiveMQ</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Apr 21, 2009
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="http://example.org/tags/activemq/">ActiveMQ</a><a class="tag" href="http://example.org/tags/jms/">JMS</a><a class="tag" href="http://example.org/tags/spring/">Spring</a></div></div>
    </header>
    <div class="post-content">
      <p>Pendant une petite semaine j’ai regardé de plus près le serveur de JMS ActiveMQ. Je vais vous faire partager mes premières remarques.</p>
<h1 id="le-coeur">Le coeur</h1>
<p>ActiveMQ est un broker de message à utiliser pour le développement d’une architecture MOM (Middleware Oriente Messages). Je l’ai choisi aussi pour sa bonne intégration avec Spring et sa bonne tenue en charge.</p>
<p>Son architecture est simple : (source : http://activemq.apache.org/code-overview.html)</p>
<p><img src="/images/uploads/2009/03/activemq-300x205.png" alt="photo"></p>
<p>Donc trois couches autour de la gestion des Queues et des Topics :</p>
<h2 id="1-8211-message-store">1 – Message Store</h2>
<p>On a la possibilité de choisir comment persister (ou non) les messages.</p>
<p>Sans persistance (message en mémoire) le risque est bien sûr de perdre des messages en cas d’arrêt du processus, mais c’est aussi comme cela que l’on obtient les meilleures performances. Par contre je n’ai pas testé le cas sans consommateur de message et où on peut vite obtenir un OutOfMemory.</p>
<p>Par défaut, ActiveMQ propose une persistance sous forme de fichiers assez performante nommée simplement “AMQ Message Store”. Dans la même famille un module kaha sauvegarde les messages sur le disque dur.</p>
<p>Attention par contre j’ai constaté des problèmes de perte de messages avec une persitence kaha lorsque j’avais 100 threads en parallèle envoyant chacun dix messages par seconde. En passant sur AMQ Message Store je n’ai pas eu de problème.</p>
<p>Il y a aussi les solutions reposant sur une base de données. Par défaut ActiveMQ lance un Derby embarqué mais il est possible d’utiliser un pont JDBC pour se connecter à une vrai base. C’est même fortement recommendé au vue des temps d’accès plus que moyens de Derby.</p>
<p>Pour finir j’ai comparé le temps de création de 10 000 Messages en fonction du système de persistance choisi. Ces chiffres sont bien sûr à prendre uniquement comme éléments de comparaison entre les solutions. J’ai fait ces mesures sur mon petit PC.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>  &lt;td align=&quot;center&quot;&gt;
    &lt;strong&gt;Temps de création&lt;/strong&gt;
  &lt;/td&gt;
&lt;/tr&gt;

&lt;tr align=&quot;center&quot;&gt;
  &lt;td&gt;
    Mémoire
  &lt;/td&gt;
  
  &lt;td&gt;
    1.3s
  &lt;/td&gt;
&lt;/tr&gt;

&lt;tr align=&quot;center&quot;&gt;
  &lt;td&gt;
    AMQ
  &lt;/td&gt;
  
  &lt;td&gt;
    2.6s
  &lt;/td&gt;
&lt;/tr&gt;

&lt;tr align=&quot;center&quot;&gt;
  &lt;td&gt;
    Kaha
  &lt;/td&gt;
  
  &lt;td&gt;
    3s
  &lt;/td&gt;
&lt;/tr&gt;

&lt;tr align=&quot;center&quot;&gt;
  &lt;td&gt;
    Base Oracle
  &lt;/td&gt;
  
  &lt;td&gt;
    61s
  &lt;/td&gt;
&lt;/tr&gt;

&lt;tr align=&quot;center&quot;&gt;
  &lt;td&gt;
    Derby
  &lt;/td&gt;
  
  &lt;td&gt;
    527s
  &lt;/td&gt;
&lt;/tr&gt;
</code></pre>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><img src="/images/uploads/2009/04/repartition1.png" alt="photo"></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><img src="/images/uploads/2009/04/repartition2.png" alt="photo"></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
